#!/usr/bin/env bash
# Receive affirmative or negative response using input message, then exit accordingly.
[[ $- == *i* ]] && action="return" || action="exit" # don't want to quit an interactive shell!
[[ -z "$@" ]] && prompt="Confirm" || prompt="$@"
while true; do
  read -r -p "$prompt ([y]/n) " response
  if [ -n "$response" ] && [[ ! "$response" =~  ^[NnYy]$ ]]; then
    echo "Invalid response."
    continue # try again
  fi
  if [[ "$response" =~ ^[Nn]$ ]]; then
    $action 1 # 'bad' exit, i.e. no
  else
    $action 0 # 'good' exit, i.e. yes or empty
  fi
  break
done
